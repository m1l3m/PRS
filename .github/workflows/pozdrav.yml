name: Welcome new contributors

on:
  pull_request:
    branches:
      - main

jobs:
  welcome:
    runs-on: ubuntu-latest

    steps:
    - name: Check if new contributor
      id: check-contributor
      run: |
        set +x
        author=$(jq -r '.pull_request.user.login' "$GITHUB_EVENT_PATH")
        if [ "$(curl -s https://api.github.com/repos/$GITHUB_REPOSITORY/collaborators/$author | jq -r '.message')" != "Not Found" ]; then
          echo "This is an existing contributor."
          exit 0
        fi
        echo "This is a new contributor."

    - name: Welcome new contributor
      if: steps.check-contributor.outputs.status == 'This is a new contributor.'
      run: |
        set -x
        echo "–î–æ–±—Ä–æ –¥–æ—à–∞–æ, @$author! üéâ"
        echo "–û–≤–æ —ò–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—ò –ø—Ä–æ—ò–µ–∫—Ç–∞ –∏–∑ –ø—Ä–µ–¥–º–µ—Ç–∞ –ü–∞—Ä–∞–ª–µ–ª–Ω–∏ –†–∞—á—É–Ω–∞—Ä—Å–∫–∏ –°–∏—Å—Ç–µ–º–∏."
        echo "–ù–µ–∫–∏ –æ—á–µ–∫—É—ò—É 10 –∞ –º–∏ —Å–∞–º–æ –¥–∞ –ø–æ–ª–æ–∂–∏–º–æ."
        echo "–ò–¥–µ –≥–∞–∞–∞—Å! üöÄ"
